<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeyondTrust Investments - Reports</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary-blue: #002f6c;
            --secondary-blue: #005eb8;
            --accent-green: #00a859;
            --accent-red: #d32f2f;
            --accent-gold: #FFD700;
            --text-dark: #2d3436;
            --background-light: #f8f9fb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: var(--background-light);
            color: var(--text-dark);
            min-height: 100vh;
            padding: 1rem;
        }

        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 1.5rem;
            position: relative;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            padding: 8px 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .page-title {
            text-align: center;
            margin-top: 1rem;
            font-size: 1.8rem;
        }

        .reports-content {
            padding: 2rem 1.5rem;
        }

        .time-filters {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
            scrollbar-width: none;
        }

        .time-filters::-webkit-scrollbar {
            display: none;
        }

        .time-filter {
            padding: 8px 16px;
            border-radius: 20px;
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.1);
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .time-filter:hover, .time-filter.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .report-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .report-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
        }

        .report-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .report-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            color: white;
        }

        .icon-performance { background: var(--primary-blue); }
        .icon-tax { background: var(--accent-red); }
        .icon-dividends { background: var(--accent-green); }
        .icon-allocation { background: var(--secondary-blue); }
        .icon-transactions { background: var(--accent-gold); color: var(--text-dark); }
        .icon-custom { background: #6a11cb; }

        .report-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .report-description {
            color: #666;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            line-height: 1.5;
            flex-grow: 1;
        }

        .report-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .report-date {
            font-size: 0.8rem;
            color: #888;
        }

        .download-btn {
            background: var(--primary-blue);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .download-btn:hover {
            background: var(--secondary-blue);
        }

        .custom-report {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-top: 2rem;
            border: 1px dashed rgba(0, 0, 0, 0.2);
        }

        .custom-report h2 {
            margin-bottom: 1rem;
            color: var(--primary-blue);
        }

        .custom-report p {
            margin-bottom: 1.5rem;
            color: #666;
        }

        .generate-btn {
            background: var(--accent-green);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .generate-btn:hover {
            background: #008a4a;
        }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .custom-modal {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .custom-modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            color: var(--primary-blue);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-dark);
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .close-modal:hover {
            opacity: 1;
        }

        .report-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .report-option {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: 8px;
            background: #f8f9fb;
            cursor: pointer;
            transition: all 0.2s;
        }

        .report-option:hover {
            background: #eef1f7;
        }

        .report-option input {
            margin-right: 1rem;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        .modal-btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .modal-btn.cancel {
            background: #f0f0f0;
            color: var(--text-dark);
        }

        .modal-btn.cancel:hover {
            background: #e0e0e0;
        }

        .modal-btn.generate {
            background: var(--accent-green);
            color: white;
        }

        .modal-btn.generate:hover {
            background: #008a4a;
        }

        @media (max-width: 768px) {
            .report-cards {
                grid-template-columns: 1fr;
            }
            
            .time-filters {
                flex-wrap: wrap;
            }

            .custom-modal {
                width: 95%;
                padding: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 1rem;
            }
            
            .page-title {
                font-size: 1.5rem;
            }
            
            .report-cards {
                gap: 1rem;
            }
            
            .report-card {
                padding: 1rem;
            }
            
            .modal-actions {
                flex-direction: column;
            }
            
            .modal-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <a href="dashboard.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                Back to Portfolio
            </a>
            <h1 class="page-title">Reports Center</h1>
        </div>

        <div class="reports-content">
            <div class="time-filters">
                <div class="time-filter active">All Time</div>
                <div class="time-filter">This Year</div>
                <div class="time-filter">Last Quarter</div>
                <div class="time-filter">Last Month</div>
                <div class="time-filter">Custom Range</div>
            </div>

            <div class="report-cards">
                <div class="report-card" data-report-type="performance">
                    <div class="report-icon icon-performance">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="report-title">Portfolio Performance</h3>
                    <p class="report-description">
                        Detailed analysis of your portfolio's growth, returns, and comparison to benchmarks.
                    </p>
                    <div class="report-actions">
                        <span class="report-date">Updated: 15 Jun 2024</span>
                        <button class="download-btn download-report">
                            <i class="fas fa-download"></i>
                            Download
                        </button>
                    </div>
                </div>

                <div class="report-card" data-report-type="tax">
                    <div class="report-icon icon-tax">
                        <i class="fas fa-file-invoice-dollar"></i>
                    </div>
                    <h3 class="report-title">Tax Report</h3>
                    <p class="report-description">
                        Capital gains, dividend income, and other tax-related information for filing.
                    </p>
                    <div class="report-actions">
                        <span class="report-date">Updated: 1 Jun 2024</span>
                        <button class="download-btn download-report">
                            <i class="fas fa-download"></i>
                            Download
                        </button>
                    </div>
                </div>

                <div class="report-card" data-report-type="dividends">
                    <div class="report-icon icon-dividends">
                        <i class="fas fa-coins"></i>
                    </div>
                    <h3 class="report-title">Dividend Report</h3>
                    <p class="report-description">
                        Comprehensive breakdown of all dividend payments and yield analysis.
                    </p>
                    <div class="report-actions">
                        <span class="report-date">Updated: 31 May 2024</span>
                        <button class="download-btn download-report">
                            <i class="fas fa-download"></i>
                            Download
                        </button>
                    </div>
                </div>

                <div class="report-card" data-report-type="allocation">
                    <div class="report-icon icon-allocation">
                        <i class="fas fa-pie-chart"></i>
                    </div>
                    <h3 class="report-title">Asset Allocation</h3>
                    <p class="report-description">
                        Visual representation of your portfolio distribution across asset classes.
                    </p>
                    <div class="report-actions">
                        <span class="report-date">Updated: 15 Jun 2024</span>
                        <button class="download-btn download-report">
                            <i class="fas fa-download"></i>
                            Download
                        </button>
                    </div>
                </div>

                <div class="report-card" data-report-type="transactions">
                    <div class="report-icon icon-transactions">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <h3 class="report-title">Transaction History</h3>
                    <p class="report-description">
                        Complete record of all buys, sells, and transfers in your portfolio.
                    </p>
                    <div class="report-actions">
                        <span class="report-date">Updated: 15 Jun 2024</span>
                        <button class="download-btn download-report">
                            <i class="fas fa-download"></i>
                            Download
                        </button>
                    </div>
                </div>

                <div class="report-card" data-report-type="sector">
                    <div class="report-icon icon-custom">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3 class="report-title">Sector Performance</h3>
                    <p class="report-description">
                        Analysis of how different market sectors are performing in your portfolio.
                    </p>
                    <div class="report-actions">
                        <span class="report-date">Updated: 10 Jun 2024</span>
                        <button class="download-btn download-report">
                            <i class="fas fa-download"></i>
                            Download
                        </button>
                    </div>
                </div>
            </div>

            <div class="custom-report">
                <h2>Generate Custom Report</h2>
                <p>
                    Create a personalized report with exactly the data you need. Select specific metrics,
                    time periods, and formats for your custom analysis.
                </p>
                <button class="generate-btn" id="generateCustomReport">
                    <i class="fas fa-plus"></i>
                    Create Custom Report
                </button>
            </div>
        </div>
    </div>

    <!-- Custom Report Modal -->
    <div class="modal-overlay" id="customReportModal">
        <div class="custom-modal">
            <div class="modal-header">
                <h2>Create Custom Report</h2>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="report-options">
                <label class="report-option">
                    <input type="checkbox" name="report-options" value="performance" checked>
                    Portfolio Performance
                </label>
                <label class="report-option">
                    <input type="checkbox" name="report-options" value="tax">
                    Tax Information
                </label>
                <label class="report-option">
                    <input type="checkbox" name="report-options" value="dividends">
                    Dividend History
                </label>
                <label class="report-option">
                    <input type="checkbox" name="report-options" value="allocation">
                    Asset Allocation
                </label>
                <label class="report-option">
                    <input type="checkbox" name="report-options" value="transactions">
                    Transaction History
                </label>
                <label class="report-option">
                    <input type="checkbox" name="report-options" value="sector">
                    Sector Performance
                </label>
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" id="cancelCustomReport">Cancel</button>
                <button class="modal-btn generate" id="generateReport">Generate Report</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize jsPDF
            const { jsPDF } = window.jspdf;
            
            // Sample data for reports
            const reportData = {
                performance: {
                    title: "Portfolio Performance Report",
                    data: [
                        ["Period", "Portfolio Return", "Benchmark Return"],
                        ["YTD", "18.76%", "12.34%"],
                        ["1 Year", "24.50%", "18.90%"],
                        ["3 Years", "42.15%", "35.60%"],
                        ["5 Years", "78.30%", "65.20%"]
                    ],
                    summary: "Your portfolio has outperformed the benchmark by an average of 3.2% annually over the past 5 years."
                },
                tax: {
                    title: "Tax Report",
                    data: [
                        ["Category", "Amount", "Taxable"],
                        ["Dividend Income", "$12,450.00", "Yes"],
                        ["Capital Gains (Short-term)", "$4,320.50", "Yes"],
                        ["Capital Gains (Long-term)", "$8,760.25", "Yes"],
                        ["Interest Income", "$1,230.75", "Yes"]
                    ],
                    summary: "Total taxable income for the year: $26,761.50. Estimated tax liability: $5,352.30 (assuming 20% rate)."
                },
                dividends: {
                    title: "Dividend Report",
                    data: [
                        ["Stock", "Amount", "Payment Date", "Yield"],
                        ["Apple Inc. (AAPL)", "$1,240.00", "15 May 2024", "0.53%"],
                        ["Microsoft Corp. (MSFT)", "$980.50", "15 May 2024", "0.71%"],
                        ["Verizon (VZ)", "$420.75", "1 Jun 2024", "6.70%"],
                        ["AT&T (T)", "$780.00", "1 Jun 2024", "6.90%"],
                        ["Coca-Cola (KO)", "$320.25", "15 Jun 2024", "3.10%"]
                    ],
                    summary: "Total dividends received YTD: $3,741.50. Projected annual dividends: $14,966.00."
                },
                allocation: {
                    title: "Asset Allocation Report",
                    data: [
                        ["Asset Class", "Percentage", "Value"],
                        ["Stocks", "68%", "$1,229,445.71"],
                        ["Bonds", "15%", "$271,201.26"],
                        ["Crypto", "10%", "$180,800.84"],
                        ["Real Estate", "5%", "$90,400.42"],
                        ["Cash", "2%", "$36,160.17"]
                    ],
                    summary: "Your portfolio is currently weighted heavily towards growth assets (78% stocks + crypto). Consider rebalancing if your risk tolerance has changed."
                },
                transactions: {
                    title: "Transaction History Report",
                    data: [
                        ["Date", "Type", "Security", "Amount"],
                        ["15 Jun 2024", "Buy", "Apple Inc. (AAPL)", "$25,000.00"],
                        ["10 Jun 2024", "Sell", "Tesla Inc. (TSLA)", "$15,750.00"],
                        ["5 Jun 2024", "Dividend", "Microsoft Corp. (MSFT)", "$980.50"],
                        ["1 Jun 2024", "Buy", "SPDR S&P 500 ETF (SPY)", "$10,000.00"],
                        ["25 May 2024", "Sell", "Amazon Inc. (AMZN)", "$12,340.00"]
                    ],
                    summary: "Total transactions this period: 15. Net investment: $8,250.00."
                },
                sector: {
                    title: "Sector Performance Report",
                    data: [
                        ["Sector", "Allocation", "YTD Return"],
                        ["Technology", "32%", "24.50%"],
                        ["Healthcare", "18%", "12.30%"],
                        ["Financials", "15%", "8.90%"],
                        ["Consumer Discretionary", "12%", "18.70%"],
                        ["Communication Services", "10%", "15.20%"],
                        ["Other", "13%", "9.80%"]
                    ],
                    summary: "Your technology sector holdings are driving most of your portfolio's outperformance this year."
                }
            };

            // Generate PDF function
            function generatePDF(reportType, isCustom = false, customOptions = []) {
                try {
                    const doc = new jsPDF();
                    const data = reportData[reportType];
                    
                    // Add title
                    doc.setFontSize(18);
                    doc.setTextColor(0, 47, 108);
                    doc.text(data.title, 105, 20, { align: 'center' });
                    
                    // Add date
                    doc.setFontSize(10);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 105, 28, { align: 'center' });
                    
                    // Add table
                    doc.autoTable({
                        startY: 60,
                        head: [data.data[0]],
                        body: data.data.slice(1),
                        theme: 'grid',
                        headStyles: {
                            fillColor: [0, 47, 108],
                            textColor: 255
                        },
                        alternateRowStyles: {
                            fillColor: [240, 240, 240]
                        }
                    });
                    
                    // Add summary
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text(data.summary, 15, doc.lastAutoTable.finalY + 20, { maxWidth: 180 });
                    
                    // Add footer
                    doc.setFontSize(8);
                    doc.setTextColor(100, 100, 100);
                    doc.text("BeyondTrust Investments - Confidential", 105, 285, { align: 'center' });
                    
                    // Save the PDF
                    const fileName = isCustom ? "Custom_Report.pdf" : `${data.title.replace(/\s+/g, '_')}.pdf`;
                    doc.save(fileName);
                } catch (error) {
                    console.error("Error generating PDF:", error);
                    alert("Error generating PDF. Please check console for details.");
                }
            }

            // Set up download buttons
            document.querySelectorAll('.download-report').forEach(button => {
                button.addEventListener('click', function() {
                    const reportCard = this.closest('.report-card');
                    const reportType = reportCard.dataset.reportType;
                    generatePDF(reportType);
                });
            });

            // Custom report modal functionality
            const customReportModal = document.getElementById('customReportModal');
            const generateCustomBtn = document.getElementById('generateCustomReport');
            const closeModalBtn = document.getElementById('closeModal');
            const cancelBtn = document.getElementById('cancelCustomReport');
            const generateBtn = document.getElementById('generateReport');

            // Modal controls
            generateCustomBtn.addEventListener('click', () => {
                customReportModal.classList.add('active');
            });

            closeModalBtn.addEventListener('click', () => {
                customReportModal.classList.remove('active');
            });

            cancelBtn.addEventListener('click', () => {
                customReportModal.classList.remove('active');
            });

            generateBtn.addEventListener('click', () => {
                const selectedOptions = Array.from(document.querySelectorAll('input[name="report-options"]:checked')).map(el => el.value);
                
                if (selectedOptions.length === 0) {
                    alert("Please select at least one report option.");
                    return;
                }

                generatePDF(selectedOptions[0], true, selectedOptions);
                customReportModal.classList.remove('active');
                
                setTimeout(() => {
                    alert(`Your custom report with ${selectedOptions.length} sections has been downloaded.`);
                }, 500);
            });

            // Close modal when clicking outside
            customReportModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    customReportModal.classList.remove('active');
                }
            });

            // Time filter functionality
            const timeFilters = document.querySelectorAll('.time-filter');
            timeFilters.forEach(filter => {
                filter.addEventListener('click', () => {
                    timeFilters.forEach(f => f.classList.remove('active'));
                    filter.classList.add('active');
                });
            });
        });
    </script>
</body>
</html>