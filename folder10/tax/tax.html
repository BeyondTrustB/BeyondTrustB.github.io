<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeyondTrust Investments - Tax Center</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary-blue: #002f6c;
            --secondary-blue: #005eb8;
            --accent-green: #00a859;
            --accent-red: #d32f2f;
            --accent-gold: #FFD700;
            --text-dark: #2d3436;
            --background-light: #f8f9fb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: var(--background-light);
            color: var(--text-dark);
            min-height: 100vh;
            padding: 1rem;
        }

        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 1.5rem;
            position: relative;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            padding: 8px 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .page-title {
            text-align: center;
            margin-top: 1rem;
            font-size: 1.8rem;
        }

        .tax-content {
            padding: 2rem 1.5rem;
        }

        .tax-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .summary-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .summary-card h3 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
            font-size: 1rem;
            opacity: 0.8;
        }

        .summary-value {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .summary-detail {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .tax-section {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-header h2 {
            color: var(--primary-blue);
        }

        .download-btn {
            background: var(--primary-blue);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .download-btn:hover {
            background: var(--secondary-blue);
        }

        .tax-table {
            width: 100%;
            border-collapse: collapse;
        }

        .tax-table th {
            background: var(--primary-blue);
            color: white;
            padding: 12px;
            text-align: left;
        }

        .tax-table td {
            padding: 12px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .tax-table tr:last-child td {
            border-bottom: none;
        }

        .tax-table tr:nth-child(even) {
            background: #f8f9fb;
        }

        .tax-amount {
            font-weight: 600;
            text-align: right;
        }

        .tax-documents {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .document-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .document-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .document-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            color: white;
            background: var(--accent-red);
        }

        .document-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .document-description {
            color: #666;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .document-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .document-date {
            font-size: 0.8rem;
            color: #888;
        }

        @media (max-width: 768px) {
            .tax-summary, .tax-documents {
                grid-template-columns: 1fr;
            }
            
            .tax-table {
                display: block;
                overflow-x: auto;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 1rem;
            }
            
            .page-title {
                font-size: 1.5rem;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .tax-table th, .tax-table td {
                padding: 8px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <a href="dashboard.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                Back to Portfolio
            </a>
            <h1 class="page-title">Tax Center</h1>
        </div>

        <div class="tax-content">
            <div class="tax-summary">
                <div class="summary-card">
                    <h3>Total Taxable Income</h3>
                    <div class="summary-value">$26,761.50</div>
                    <div class="summary-detail">For tax year 2024</div>
                </div>
                <div class="summary-card">
                    <h3>Estimated Tax Liability</h3>
                    <div class="summary-value">$5,352.30</div>
                    <div class="summary-detail">Assuming 20% tax rate</div>
                </div>
                <div class="summary-card">
                    <h3>Capital Gains</h3>
                    <div class="summary-value">$13,080.75</div>
                    <div class="summary-detail">$4,320.50 short-term, $8,760.25 long-term</div>
                </div>
                <div class="summary-card">
                    <h3>Dividend Income</h3>
                    <div class="summary-value">$12,450.00</div>
                    <div class="summary-detail">$9,200.00 qualified, $3,250.00 non-qualified</div>
                </div>
            </div>

            <div class="tax-section">
                <div class="section-header">
                    <h2>Capital Gains</h2>
                    <button class="download-btn" id="downloadGains">
                        <i class="fas fa-download"></i>
                        Download Report
                    </button>
                </div>
                <table class="tax-table">
                    <thead>
                        <tr>
                            <th>Asset</th>
                            <th>Date Acquired</th>
                            <th>Date Sold</th>
                            <th>Cost Basis</th>
                            <th>Proceeds</th>
                            <th>Gain/Loss</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Apple Inc. (AAPL)</td>
                            <td>15 Jun 2023</td>
                            <td>15 Jun 2024</td>
                            <td class="tax-amount">$15,000.00</td>
                            <td class="tax-amount">$18,500.00</td>
                            <td class="tax-amount" style="color: var(--accent-green);">+$3,500.00</td>
                        </tr>
                        <tr>
                            <td>Microsoft Corp. (MSFT)</td>
                            <td>10 May 2021</td>
                            <td>10 Jun 2024</td>
                            <td class="tax-amount">$8,000.00</td>
                            <td class="tax-amount">$12,500.00</td>
                            <td class="tax-amount" style="color: var(--accent-green);">+$4,500.00</td>
                        </tr>
                        <tr>
                            <td>Tesla Inc. (TSLA)</td>
                            <td>15 Jan 2024</td>
                            <td>15 May 2024</td>
                            <td class="tax-amount">$12,000.00</td>
                            <td class="tax-amount">$10,750.00</td>
                            <td class="tax-amount" style="color: var(--accent-red);">-$1,250.00</td>
                        </tr>
                        <tr>
                            <td>Amazon Inc. (AMZN)</td>
                            <td>20 Mar 2020</td>
                            <td>25 May 2024</td>
                            <td class="tax-amount">$5,000.00</td>
                            <td class="tax-amount">$8,250.00</td>
                            <td class="tax-amount" style="color: var(--accent-green);">+$3,250.00</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="tax-section">
                <div class="section-header">
                    <h2>Dividend Income</h2>
                    <button class="download-btn" id="downloadDividends">
                        <i class="fas fa-download"></i>
                        Download Report
                    </button>
                </div>
                <table class="tax-table">
                    <thead>
                        <tr>
                            <th>Stock</th>
                            <th>Amount</th>
                            <th>Payment Date</th>
                            <th>Qualified</th>
                            <th>Tax Rate</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Apple Inc. (AAPL)</td>
                            <td class="tax-amount">$1,240.00</td>
                            <td>15 May 2024</td>
                            <td>Yes</td>
                            <td>15%</td>
                        </tr>
                        <tr>
                            <td>Microsoft Corp. (MSFT)</td>
                            <td class="tax-amount">$980.50</td>
                            <td>15 May 2024</td>
                            <td>Yes</td>
                            <td>15%</td>
                        </tr>
                        <tr>
                            <td>Verizon (VZ)</td>
                            <td class="tax-amount">$420.75</td>
                            <td>1 Jun 2024</td>
                            <td>No</td>
                            <td>24%</td>
                        </tr>
                        <tr>
                            <td>AT&T (T)</td>
                            <td class="tax-amount">$780.00</td>
                            <td>1 Jun 2024</td>
                            <td>No</td>
                            <td>24%</td>
                        </tr>
                        <tr>
                            <td>Coca-Cola (KO)</td>
                            <td class="tax-amount">$320.25</td>
                            <td>15 Jun 2024</td>
                            <td>Yes</td>
                            <td>15%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="tax-section">
                <div class="section-header">
                    <h2>Tax Documents</h2>
                </div>
                <div class="tax-documents">
                    <div class="document-card">
                        <div class="document-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <h3 class="document-title">Form 1099-DIV</h3>
                        <p class="document-description">
                            Dividends and distributions report for tax year 2024.
                        </p>
                        <div class="document-actions">
                            <span class="document-date">Available: Jan 31, 2025</span>
                            <button class="download-btn download-document" data-doctype="1099-div">
                                <i class="fas fa-download"></i>
                                Download
                            </button>
                        </div>
                    </div>
                    <div class="document-card">
                        <div class="document-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <h3 class="document-title">Form 1099-B</h3>
                        <p class="document-description">
                            Proceeds from broker and barter exchange transactions.
                        </p>
                        <div class="document-actions">
                            <span class="document-date">Available: Jan 31, 2025</span>
                            <button class="download-btn download-document" data-doctype="1099-b">
                                <i class="fas fa-download"></i>
                                Download
                            </button>
                        </div>
                    </div>
                    <div class="document-card">
                        <div class="document-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <h3 class="document-title">Annual Tax Summary</h3>
                        <p class="document-description">
                            Comprehensive tax report for all investment activities.
                        </p>
                        <div class="document-actions">
                            <span class="document-date">Available: Jan 31, 2025</span>
                            <button class="download-btn download-document" data-doctype="annual-summary">
                                <i class="fas fa-download"></i>
                                Download
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize jsPDF
            const { jsPDF } = window.jspdf;
            
            // Generate PDF function
            function generateTaxPDF(type) {
                try {
                    const doc = new jsPDF();
                    
                    // Add title
                    doc.setFontSize(18);
                    doc.setTextColor(0, 47, 108);
                    doc.text(`Tax ${type} Report`, 105, 20, { align: 'center' });
                    
                    // Add date
                    doc.setFontSize(10);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 105, 28, { align: 'center' });
                    
                    // Add content based on type
                    if (type === 'Gains') {
                        doc.autoTable({
                            startY: 40,
                            head: [['Asset', 'Date Acquired', 'Date Sold', 'Cost Basis', 'Proceeds', 'Gain/Loss']],
                            body: [
                                ['Apple Inc. (AAPL)', '15 Jun 2023', '15 Jun 2024', '$15,000.00', '$18,500.00', '+$3,500.00'],
                                ['Microsoft Corp. (MSFT)', '10 May 2021', '10 Jun 2024', '$8,000.00', '$12,500.00', '+$4,500.00'],
                                ['Tesla Inc. (TSLA)', '15 Jan 2024', '15 May 2024', '$12,000.00', '$10,750.00', '-$1,250.00'],
                                ['Amazon Inc. (AMZN)', '20 Mar 2020', '25 May 2024', '$5,000.00', '$8,250.00', '+$3,250.00']
                            ],
                            headStyles: {
                                fillColor: [0, 47, 108],
                                textColor: 255
                            },
                            columnStyles: {
                                3: { halign: 'right' },
                                4: { halign: 'right' },
                                5: { halign: 'right' }
                            },
                            didDrawCell: (data) => {
                                if (data.section === 'body' && data.column.index === 5) {
                                    const value = data.cell.raw;
                                    if (value.startsWith('+')) {
                                        doc.setTextColor(0, 168, 89); // Green
                                    } else if (value.startsWith('-')) {
                                        doc.setTextColor(211, 47, 47); // Red
                                    }
                                    doc.text(value, data.cell.x + data.cell.width - 2, data.cell.y + 10, { align: 'right' });
                                    doc.setTextColor(0, 0, 0); // Reset to black
                                    return false; // Skip default rendering
                                }
                            }
                        });
                        
                        doc.setFontSize(12);
                        doc.text('Total Capital Gains for 2024: $13,080.75 ($4,320.50 short-term, $8,760.25 long-term)', 15, doc.lastAutoTable.finalY + 20);
                    } 
                    else if (type === 'Dividends') {
                        doc.autoTable({
                            startY: 40,
                            head: [['Stock', 'Amount', 'Payment Date', 'Qualified', 'Tax Rate']],
                            body: [
                                ['Apple Inc. (AAPL)', '$1,240.00', '15 May 2024', 'Yes', '15%'],
                                ['Microsoft Corp. (MSFT)', '$980.50', '15 May 2024', 'Yes', '15%'],
                                ['Verizon (VZ)', '$420.75', '1 Jun 2024', 'No', '24%'],
                                ['AT&T (T)', '$780.00', '1 Jun 2024', 'No', '24%'],
                                ['Coca-Cola (KO)', '$320.25', '15 Jun 2024', 'Yes', '15%']
                            ],
                            headStyles: {
                                fillColor: [0, 47, 108],
                                textColor: 255
                            },
                            columnStyles: {
                                1: { halign: 'right' }
                            }
                        });
                        
                        doc.setFontSize(12);
                        doc.text('Total Dividend Income for 2024: $12,450.00 ($9,200.00 qualified, $3,250.00 non-qualified)', 15, doc.lastAutoTable.finalY + 20);
                    }
                    else if (type === 'Document') {
                        doc.setFontSize(16);
                        doc.text(`Form ${document.getElementById('downloadGains').dataset.doctype}`, 105, 40, { align: 'center' });
                        doc.setFontSize(12);
                        doc.text('This is a placeholder for the actual tax document.', 105, 60, { align: 'center' });
                        doc.text('Your official tax documents will be available by January 31, 2025.', 105, 70, { align: 'center' });
                    }
                    
                    // Add footer
                    doc.setFontSize(8);
                    doc.setTextColor(100, 100, 100);
                    doc.text("BeyondTrust Investments - Confidential Tax Document", 105, 285, { align: 'center' });
                    
                    // Save the PDF
                    const fileName = type === 'Document' 
                        ? `Tax_${document.getElementById('downloadGains').dataset.doctype}.pdf` 
                        : `Tax_${type}_Report.pdf`;
                    doc.save(fileName);
                } catch (error) {
                    console.error("Error generating PDF:", error);
                    alert("Error generating PDF. Please check console for details.");
                }
            }

            // Set up download buttons
            document.getElementById('downloadGains').addEventListener('click', () => generateTaxPDF('Gains'));
            document.getElementById('downloadDividends').addEventListener('click', () => generateTaxPDF('Dividends'));
            
            document.querySelectorAll('.download-document').forEach(button => {
                button.addEventListener('click', function() {
                    this.dataset.doctype = this.getAttribute('data-doctype');
                    generateTaxPDF('Document');
                });
            });
        });
    </script>
</body>
</html>