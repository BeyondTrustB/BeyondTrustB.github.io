<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeyondTrust Bank – Card Hub</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
        }
        body {
            background: #e4ecf5;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }
        .bank-app {
            max-width: 1300px;
            width: 100%;
            background: white;
            border-radius: 40px 40px 30px 30px;
            box-shadow: 0 30px 60px -15px rgba(0,35,70,0.3);
            overflow: hidden;
        }
        /* header */
        .header {
            background: linear-gradient(148deg, #00203d, #003866);
            color: white;
            padding: 1.6rem 2.2rem 1.2rem 2.2rem;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            background: rgba(255,255,255,0.12);
            padding: 8px 20px;
            border-radius: 40px;
            font-size: 0.95rem;
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 12px;
        }
        .back-link:hover { background: rgba(255,255,255,0.22); }
        .header h1 { font-size: 2.2rem; font-weight: 600; }
        .header p { opacity: 0.85; }

        /* main layout */
        .main-layout {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            padding: 32px 36px;
            background: #f7fafd;
        }
        .left-column {
            flex: 2;
            min-width: 500px;
        }
        .right-column {
            flex: 1.2;
            min-width: 320px;
            background: white;
            border-radius: 36px;
            padding: 26px 24px;
            box-shadow: 0 12px 28px rgba(0,40,70,0.1);
            border: 1px solid #d9e6f5;
            align-self: start;
        }

        /* card outer */
        .card-3d-perspective {
            perspective: 1600px;
            margin-bottom: 28px;
            width: fit-content;
        }
        .card-3d {
            width: 460px;
            height: 280px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s ease;
            border-radius: 24px;
            cursor: pointer;
            box-shadow: 0 30px 45px -15px #001e3c;
        }
        .card-3d.flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 24px;
            padding: 22px 26px;
            background: linear-gradient(140deg, #021c30, #0e334e);
            color: white;
            border: 1px solid rgba(255,255,200,0.2);
            box-shadow: inset 0 -2px 5px rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        /* front */
        .front {
            background: radial-gradient(circle at 30% 40%, #1b4b6e, #00253d);
        }
        .card-header-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .chip-area {
            display: flex;
            flex-direction: column;
        }
        .chip {
            width: 48px;
            height: 36px;
            background: linear-gradient(145deg, #e9cf9a, #bfa25e);
            border-radius: 8px 4px 8px 4px;
            box-shadow: 0 3px 6px black;
            position: relative;
        }
        .chip::after {
            content: "";
            position: absolute;
            inset: 5px;
            background: repeating-linear-gradient(45deg, #9e813e 0px, #9e813e 2px, #dbb471 2px, #dbb471 4px);
            border-radius: 4px;
        }
        .brand {
            font-size: 2.4rem;
            font-weight: 700;
            letter-spacing: 2px;
            text-shadow: 0 2px 5px black;
        }
        .card-number {
            font-family: 'Courier New', monospace;
            font-size: 1.7rem;
            letter-spacing: 5px;
            background: rgba(0,0,0,0.4);
            padding: 12px 14px;
            border-radius: 18px;
            text-align: center;
            margin: 12px 0 8px 0;
            backdrop-filter: blur(3px);
            border: 1px solid rgba(255,255,240,0.2);
            transition: filter 0.2s;
        }
        .card-number.blurred {
            filter: blur(5px);
            user-select: none;
        }
        .name-exp-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 6px;
        }
        .holder-name {
            text-transform: uppercase;
            font-size: 1.35rem;
            font-weight: 500;
            letter-spacing: 1.5px;
        }
        .expiry {
            font-size: 1.3rem;
            background: rgba(0,0,0,0.4);
            padding: 4px 12px;
            border-radius: 30px;
        }
        .mastercard-icon {
            font-size: 2.4rem;
            color: white;
            opacity: 0.9;
            text-align: right;
        }

        /* back face */
        .back {
            transform: rotateY(180deg);
            background: linear-gradient(155deg, #0b2538, #1e3d58);
            justify-content: flex-start;
            padding: 20px 22px;
        }
        .mag-strip {
            background: #1f1f28;
            height: 42px;
            width: 100%;
            margin-top: 15px;
            margin-bottom: 20px;
        }
        .cvv-block {
            background: #ecf0f5;
            color: #000;
            padding: 8px 20px;
            border-radius: 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 90%;
            margin: 0 auto;
            font-weight: 600;
        }
        .cvv-value {
            font-family: monospace;
            font-size: 2rem;
            background: white;
            padding: 2px 25px;
            border-radius: 30px;
            letter-spacing: 2px;
        }
        .customer-service {
            margin-top: 22px;
            font-size: 0.8rem;
            color: #bfd9ff;
            background: rgba(0,20,40,0.7);
            padding: 10px;
            border-radius: 18px;
            border-left: 3px solid #ffd966;
        }
        .legal-text {
            font-size: 0.66rem;
            line-height: 1.4;
            color: #cbdae9;
            margin-top: 16px;
            max-height: 100px;
            overflow-y: auto;
            padding-right: 5px;
        }
        /* billing address block (below card) - can be hidden on freeze */
        .billing-panel {
            background: #e3effa;
            border-radius: 28px;
            padding: 20px 24px;
            margin: 25px 0 18px 0;
            border: 1px solid #aac5e2;
            transition: opacity 0.2s;
        }
        .billing-panel.hidden {
            opacity: 0.3;
            pointer-events: none;
            filter: blur(4px);
            user-select: none;
        }
        .billing-title {
            display: flex;
            gap: 8px;
            color: #002a5a;
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 12px;
        }
        .billing-details {
            display: flex;
            flex-wrap: wrap;
            gap: 15px 25px;
            background: white;
            padding: 15px 20px;
            border-radius: 24px;
        }
        .bill-item {
            display: flex;
            flex-direction: column;
        }
        .bill-label {
            font-size: 0.7rem;
            color: #346792;
        }
        .bill-value {
            font-weight: 600;
            color: #001e3b;
        }

        /* freeze & request buttons */
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 5px;
            margin-bottom: 20px;
        }
        .primary-btn {
            background: white;
            border: 2px solid #003b70;
            border-radius: 60px;
            padding: 12px 28px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #003b70;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: 0.2s;
            box-shadow: 0 5px 12px rgba(0,60,120,0.1);
        }
        .primary-btn i { font-size: 1.3rem; }
        .primary-btn:hover {
            background: #003b70;
            color: white;
        }
        .secondary-btn {
            background: #ecf5ff;
            border: 1px solid #b0cbea;
            border-radius: 60px;
            padding: 12px 28px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #002f60;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            border: none;
        }
        .secondary-btn:hover { background: #dae9fd; }

        /* virtual card section */
        .virtual-section {
            background: white;
            border-radius: 28px;
            padding: 22px;
            box-shadow: 0 10px 18px rgba(0,50,80,0.1);
            margin-top: 25px;
            border: 1px solid #bad2f0;
            display: none;
        }
        .virtual-section.visible {
            display: block;
        }
        .virtual-card-display {
            background: #e2edfc;
            border-radius: 20px;
            padding: 20px;
        }
        .virtual-row {
            display: flex;
            justify-content: space-between;
            background: white;
            padding: 12px 18px;
            border-radius: 50px;
            margin-bottom: 10px;
            align-items: center;
        }
        .freeze-indicator {
            background: #cce0f5;
            border-radius: 40px;
            padding: 10px 20px;
            display: flex;
            gap: 10px;
            font-weight: 600;
            color: #002856;
            margin-bottom: 15px;
        }
        .blurred-card {
            filter: blur(4px);
            user-select: none;
        }

        /* loading spinner */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* modal popup */
        .modal-overlay {
            position: fixed;
            top:0; left:0; width:100%; height:100%;
            background: rgba(0,20,40,0.6);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-card {
            background: white;
            max-width: 480px;
            width: 90%;
            border-radius: 48px;
            padding: 32px;
            box-shadow: 0 40px 70px black;
            text-align: center;
        }
        .modal-icon { font-size: 3.5rem; color: #c5283d; margin-bottom: 15px; }
        .modal-title { font-size: 2rem; color: #001d39; margin-bottom: 16px; }
        .modal-text { color: #2a4b74; margin-bottom: 28px; line-height: 1.5; }
        .modal-buttons { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
        .modal-btn { padding: 14px 28px; border-radius: 40px; border: none; font-weight: 600; cursor: pointer; }
        .modal-btn.primary { background: #003f7f; color: white; }
        .modal-btn.secondary { background: #dee9f5; color: #001d3d; }
        .modal-btn.contact { background: #ffeed9; color: #a65d00; border: 1px solid #ffb347; }
        .close-icon { float: right; font-size: 2rem; cursor: pointer; }

        /* toast */
        .toast-message {
            background: #1e3e5c;
            color: white;
            padding: 16px 28px;
            border-radius: 60px;
            font-weight: 500;
            box-shadow: 0 15px 30px rgba(0,60,100,0.5);
        }
        #temporaryToast {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 2000; display: none;
        }
    </style>
</head>
<body>
    <div class="bank-app">
        <div class="header">
            <a href="#" class="back-link" onclick="alert('Returning to accounts summary')"><i class="fas fa-arrow-left"></i> Accounts</a>
            <h1>Card services</h1>
            <p>Anne Blanford • BEYOND physical</p>
        </div>

        <div class="main-layout">
            <!-- LEFT COLUMN (physical card + billing + freeze/request) -->
            <div class="left-column">
                <!-- 3D flip card -->
                <div class="card-3d-perspective">
                    <div class="card-3d" id="physicalCard3d">
                        <!-- FRONT -->
                        <div class="card-face front">
                            <div class="card-header-row">
                                <div class="chip-area"><div class="chip"></div></div>
                                <span class="brand">BEYOND</span>
                            </div>
                            <div class="card-number" id="physicalCardNumber">1812 4270 5841 1570</div>
                            <div class="name-exp-row">
                                <span class="holder-name">ANNE BLANFORD</span>
                                <span class="expiry">01/27</span>
                            </div>
                            <div class="mastercard-icon"><i class="fab fa-cc-mastercard"></i></div>
                        </div>
                        <!-- BACK (cvv + service text) -->
                        <div class="card-face back">
                            <div class="mag-strip"></div>
                            <div class="cvv-block">
                                <span>CVV</span>
                                <span class="cvv-value" id="physicalCvv">265</span>
                            </div>
                            <div class="customer-service">
                                <i class="fas fa-envelope"></i> For Customer Service: beyondtrustcustomerservice@gmail.com
                            </div>
                            <div class="legal-text">
                                This card is provided to customers for identification and service purposes. Please keep it safe and handle it with care. If the card is lost, stolen, or damaged, contact customer service immediately using the email above. The issuer of this card is not responsible for any loss resulting from misuse or unauthorized use. Use of this card means you agree to the terms and conditions set by the issuing company.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- billing address panel (will be hidden on freeze) -->
                <div class="billing-panel" id="billingPanel">
                    <div class="billing-title"><i class="fas fa-map-pin"></i> Billing address</div>
                    <div class="billing-details">
                        <div class="bill-item"><span class="bill-label">Street</span><span class="bill-value">9300 COVE POINT</span></div>
                        <div class="bill-item"><span class="bill-label">City</span><span class="bill-value">BOYNTON BEACH</span></div>
                        <div class="bill-item"><span class="bill-label">State</span><span class="bill-value">FL</span></div>
                        <div class="bill-item"><span class="bill-label">ZIP</span><span class="bill-value">33472-2768</span></div>
                        <div class="bill-item"><span class="bill-label">Country</span><span class="bill-value">USA</span></div>
                    </div>
                </div>

                <!-- buttons below card: freeze physical (dynamic) and request virtual card -->
                <div class="action-buttons">
                    <button class="primary-btn" id="freezePhysicalBtn"><i class="fas fa-snowflake"></i> <span id="freezeBtnText">Freeze physical card</span></button>
                    <button class="secondary-btn" id="requestVirtualBtn"><i class="fas fa-plus-circle"></i> Request virtual card</button>
                </div>
            </div>

            <!-- RIGHT COLUMN: virtual card area (persists via localStorage) -->
            <div class="right-column">
                <h3 style="margin-bottom: 25px; display: flex; gap:10px;"><i class="fas fa-credit-card" style="color: #003f7f;"></i> Virtual card</h3>
                <div id="virtualCardContainer" class="virtual-section">
                    <!-- will be populated by js from storage -->
                </div>
                <!-- placeholder when no virtual card in storage -->
                <div id="noVirtualPlaceholder" style="background: #ecf3fa; border-radius: 28px; padding: 40px 20px; text-align: center; color: #2f5575; border: 1px dashed #9bb5d4;">
                    <i class="fas fa-credit-card" style="font-size: 3rem; opacity: 0.5; margin-bottom: 15px;"></i>
                    <p>No virtual card yet. Click "Request virtual card" to generate one instantly.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL for freeze warning (attention style) -->
    <div id="freezeModal" class="modal-overlay">
        <div class="modal-card">
            <i class="fas fa-times close-icon" onclick="closeModal()"></i>
            <div class="modal-icon"><i class="fas fa-exclamation-triangle"></i></div>
            <div class="modal-title">Attention</div>
            <div class="modal-text" id="modalMessage">Freezing this card will immediately suspend all web payments, recurring transactions, and contactless usage. You can unfreeze anytime from settings.</div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal()">Keep active</button>
                <button class="modal-btn primary" id="confirmFreezeBtn">Freeze card</button>
                <button class="modal-btn contact" id="contactSupportBtn"><i class="fas fa-headset"></i> Contact support</button>
            </div>
        </div>
    </div>

    <!-- SUPPORT MODAL (email popup) -->
    <div id="supportModal" class="modal-overlay">
        <div class="modal-card">
            <i class="fas fa-times close-icon" onclick="closeSupportModal()"></i>
            <div class="modal-icon"><i class="fas fa-envelope-open-text" style="color: #004080;"></i></div>
            <div class="modal-title">Customer support</div>
            <div class="modal-text" style="font-size:1.3rem;">beyondtrustcustomerservice@gmail.com</div>
            <button class="modal-btn primary" onclick="closeSupportModal()">Close</button>
        </div>
    </div>

    <!-- toast for messages -->
    <div id="temporaryToast"></div>

    <script>
        (function() {
            // ----- ELEMENTS -----
            const physicalCard3d = document.getElementById('physicalCard3d');
            const physicalCvv = document.getElementById('physicalCvv');
            const physicalNumber = document.getElementById('physicalCardNumber');
            const billingPanel = document.getElementById('billingPanel');
            const freezeModal = document.getElementById('freezeModal');
            const supportModal = document.getElementById('supportModal');
            const modalMessage = document.getElementById('modalMessage');
            const confirmFreezeBtn = document.getElementById('confirmFreezeBtn');
            const contactBtn = document.getElementById('contactSupportBtn');
            const toastDiv = document.getElementById('temporaryToast');
            const virtualContainer = document.getElementById('virtualCardContainer');
            const noVirtualPlaceholder = document.getElementById('noVirtualPlaceholder');
            const requestVirtualBtn = document.getElementById('requestVirtualBtn');
            const freezePhysicalBtn = document.getElementById('freezePhysicalBtn');
            const freezeBtnText = document.getElementById('freezeBtnText');

            // Web storage keys
            const VIRTUAL_STORAGE_KEY = 'beyond_virtual_card_data';
            const PHYSICAL_STORAGE_KEY = 'beyond_physical_frozen';

            // ----- helper: show toast -----
            function showToast(text, duration = 2500) {
                toastDiv.style.display = 'block';
                toastDiv.innerHTML = `<div class="toast-message"><i class="fas fa-check-circle"></i> ${text}</div>`;
                setTimeout(() => { toastDiv.style.display = 'none'; }, duration);
            }

            // ----- helper: close modals -----
            window.closeModal = function() { freezeModal.style.display = 'none'; };
            window.closeSupportModal = function() { supportModal.style.display = 'none'; };

            // ----- flip physical card on click -----
            physicalCard3d.addEventListener('click', () => {
                physicalCard3d.classList.toggle('flipped');
            });

            // ----- PHYSICAL CARD FROZEN STATE PERSISTENCE & BUTTON UPDATE -----
            function applyPhysicalFrozenState() {
                const frozen = localStorage.getItem(PHYSICAL_STORAGE_KEY) === 'true';
                if (frozen) {
                    physicalNumber.classList.add('blurred');
                    physicalCvv.style.filter = 'blur(4px)';
                    billingPanel.classList.add('hidden');
                    freezeBtnText.innerText = 'Unfreeze physical card';
                    freezePhysicalBtn.innerHTML = '<i class="fas fa-sun"></i> <span id="freezeBtnText">Unfreeze physical card</span>';
                    // re-assign text element reference
                    document.getElementById('freezeBtnText').innerText = 'Unfreeze physical card';
                } else {
                    physicalNumber.classList.remove('blurred');
                    physicalCvv.style.filter = 'none';
                    billingPanel.classList.remove('hidden');
                    freezeBtnText.innerText = 'Freeze physical card';
                    freezePhysicalBtn.innerHTML = '<i class="fas fa-snowflake"></i> <span id="freezeBtnText">Freeze physical card</span>';
                    document.getElementById('freezeBtnText').innerText = 'Freeze physical card';
                }
            }

            // initial apply
            applyPhysicalFrozenState();

            // ----- FREEZE / UNFREEZE PHYSICAL CARD (attention modal for freeze, direct for unfreeze) -----
            freezePhysicalBtn.addEventListener('click', function() {
                const currentlyFrozen = localStorage.getItem(PHYSICAL_STORAGE_KEY) === 'true';
                
                if (currentlyFrozen) {
                    // unfreeze directly (no warning)
                    localStorage.setItem(PHYSICAL_STORAGE_KEY, 'false');
                    applyPhysicalFrozenState();
                    showToast('Physical card unfrozen. All functions restored.');
                } else {
                    // show attention modal before freezing
                    modalMessage.innerText = 'Freezing your physical BEYOND card will block all POS, contactless, and ATM transactions. Billing address will be hidden. You can unfreeze anytime.';
                    freezeModal.style.display = 'flex';
                    confirmFreezeBtn.onclick = function() {
                        localStorage.setItem(PHYSICAL_STORAGE_KEY, 'true');
                        applyPhysicalFrozenState();
                        closeModal();
                        showToast('Physical card frozen. Billing address hidden.');
                    };
                    contactBtn.onclick = function() {
                        closeModal();
                        supportModal.style.display = 'flex';
                    };
                }
            });

            // ----- VIRTUAL CARD FUNCTIONS (with localStorage) -----
            function renderVirtualCardFromStorage() {
                const stored = localStorage.getItem(VIRTUAL_STORAGE_KEY);
                if (stored) {
                    try {
                        const vc = JSON.parse(stored);
                        noVirtualPlaceholder.style.display = 'none';
                        virtualContainer.classList.add('visible');

                        const frozenClass = vc.frozen ? 'blurred-card' : '';
                        const freezeBtnIcon = vc.frozen ? 'fa-sun' : 'fa-snowflake';
                        const freezeBtnText = vc.frozen ? 'Unfreeze virtual card' : 'Freeze virtual card';
                        let freezeIndicatorHtml = '';
                        if (vc.frozen) {
                            freezeIndicatorHtml = '<div class="freeze-indicator"><i class="fas fa-snowflake"></i> Card frozen · web payments suspended</div>';
                        }

                        virtualContainer.innerHTML = `
                            <div class="virtual-card-display">
                                ${freezeIndicatorHtml}
                                <div class="virtual-row ${frozenClass}">
                                    <span>${vc.pan}</span>
                                </div>
                                <div class="virtual-row ${frozenClass}" style="justify-content: space-between;">
                                    <span>Exp: ${vc.expiry}</span>
                                    <span>CVV: ${vc.cvv}</span>
                                </div>
                                <div class="virtual-row ${frozenClass}">${vc.name}</div>
                                <button class="secondary-btn" id="freezeVirtualBtn" style="width:100%; margin-top:15px; background:#d9e9ff;"><i class="fas ${freezeBtnIcon}"></i> ${freezeBtnText}</button>
                                <button class="primary-btn" id="virtualContactBtn" style="width:100%; margin-top:10px; background:#eef5fc; color:#003f7f;"><i class="fas fa-envelope"></i> Contact support</button>
                            </div>
                        `;

                        document.getElementById('freezeVirtualBtn').addEventListener('click', function() {
                            const current = JSON.parse(localStorage.getItem(VIRTUAL_STORAGE_KEY));
                            if (current.frozen) {
                                current.frozen = false;
                                localStorage.setItem(VIRTUAL_STORAGE_KEY, JSON.stringify(current));
                                renderVirtualCardFromStorage();
                                showToast('Virtual card unfrozen. Online payments enabled.');
                            } else {
                                modalMessage.innerText = 'Freezing your virtual card will suspend all online transactions, tokenized payments, and digital wallet access. You can unfreeze anytime.';
                                freezeModal.style.display = 'flex';
                                confirmFreezeBtn.onclick = function() {
                                    current.frozen = true;
                                    localStorage.setItem(VIRTUAL_STORAGE_KEY, JSON.stringify(current));
                                    renderVirtualCardFromStorage();
                                    closeModal();
                                    showToast('Virtual card frozen. Web payments suspended.');
                                };
                                contactBtn.onclick = function() {
                                    closeModal();
                                    supportModal.style.display = 'flex';
                                };
                            }
                        });

                        document.getElementById('virtualContactBtn').addEventListener('click', function() {
                            supportModal.style.display = 'flex';
                        });

                    } catch (e) {
                        resetToNoCard();
                    }
                } else {
                    resetToNoCard();
                }
            }

            function resetToNoCard() {
                virtualContainer.classList.remove('visible');
                noVirtualPlaceholder.style.display = 'block';
            }

            // ----- REQUEST VIRTUAL CARD (stores in localStorage) -----
            requestVirtualBtn.addEventListener('click', function() {
                noVirtualPlaceholder.style.display = 'none';
                virtualContainer.classList.add('visible');
                virtualContainer.innerHTML = `
                    <div style="text-align:center; padding:30px;">
                        <span class="loader" style="margin:0 auto 20px;"></span>
                        <div style="color:#002856;">Requesting virtual card, please wait...</div>
                    </div>
                `;

                setTimeout(() => {
                    const virtualCard = {
                        pan: '4512 7700 3391 2044',
                        expiry: '04/30',
                        cvv: '887',
                        name: 'ANNE BLANFORD',
                        frozen: false,
                    };
                    localStorage.setItem(VIRTUAL_STORAGE_KEY, JSON.stringify(virtualCard));
                    renderVirtualCardFromStorage();
                    showToast('Card request successful · Your virtual card is ready.', 3000);
                }, 2000);
            });

            // initial load
            renderVirtualCardFromStorage();

            // click outside to close modals
            window.onclick = function(event) {
                if (event.target === freezeModal) closeModal();
                if (event.target === supportModal) closeSupportModal();
            };
        })();
    </script>
</body>
</html>
